###########################
# r56rp JAP Events
###########################

add_namespace = r56rp_jap

country_event = { # japan asks germany for joint rocket research
	id = r56rp_jap.1
	title = r56rp_jap.1.t
	desc = r56rp_jap.1.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes


	option = { 	# yes, we agree to joint research on rocket and jets
		name = r56rp_jap.1.a
		ai_chance = {
			factor = 50

		}

		FROM = {
			add_tech_bonus = {
				name = JAP_german_rocketry
				ahead_reduction = 1
				bonus = 1
				uses = 1
				category = rocketry
			}
	
			add_ideas = JAP_german_rocketry
	
			if = {
				limit = {
					OR = {
						has_dlc = "Together for Victory"
						has_dlc = "Death or Dishonor"
						has_dlc = "Waking the Tiger"
					}
				}
				FROM = { add_to_tech_sharing_group = r56rp_JAP_GER_rocket_jet_research }
				ROOT = { add_to_tech_sharing_group = r56rp_JAP_GER_rocket_jet_research }
			}
		}
		
	}

	option = { 	# no, no joint rocket research.
		name = r56rp_jap.1.b
		ai_chance = {
			factor = 10
		}

		FROM = {
			add_opinion_modifier = {
				target = GER
				modifier = r56rp_JAP_GER_refused_rocket
			}
		}
	}
}
# Miyagi
add_namespace = JAP_r56rp_yonai_takeover

country_event = {
    id = JAP_r56rp_yonai_takeover.1
    title = JAP_r56rp_yonai_takeover.1.t
    desc = JAP_r56rp_yonai_takeover.1.d
    picture = GFX_report_event_ITA_democratic_parlament

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_yonai_takeover.1.a
        ai_chance = {
            factor = 99
        }
        set_country_flag = JAP_r56rp_cooperation_with_democrats_event
        add_political_power = 50
		add_stability = 0.075
    }


    option = {
        name = JAP_r56rp_yonai_takeover.1.b
        ai_chance = {
            factor = 99
        }
        custom_effect_tooltip = JAP_r56rp_tooltip_miyagi_yonai_descison
        set_country_flag = JAP_r56rp_no_deal_with_democrats_event
        add_political_power = -100
		add_stability = -0.20
    }

    
}

country_event = {
    id = JAP_r56rp_yonai_takeover.2
    title = JAP_r56rp_yonai_takeover.2.t
    desc = JAP_r56rp_yonai_takeover.2.d
    picture = GFX_report_event_japanese_army_parade

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_yonai_takeover.2.a
        ai_chance = {
            factor = 99
        }
        set_country_flag = JAP_r56rp_no_cooperation_flag
        mark_focus_tree_layout_dirty = yes
        add_political_power = -50
		add_stability = -0.075
    }
    
}

country_event = {
    id = JAP_r56rp_yonai_takeover.3
    title = JAP_r56rp_yonai_takeover.3.t
    desc = JAP_r56rp_yonai_takeover.3.d
    picture = GFX_report_event_generic_sign_treaty3

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_yonai_takeover.3.a
        ai_chance = {
            factor = 99
        }
        add_political_power = 50
		add_stability = 0.075
        add_popularity = {
            ideology = democratic
            popularity = 0.1
        }
    }
    
}

add_namespace = JAP_r56rp_japanchuria_ev

# JAPAN PROPOSES UNIFICATION
country_event = {
    id = JAP_r56rp_japanchuria_ev.1
    title = JAP_r56rp_japanchuria_ev.1.t
    desc = JAP_r56rp_japanchuria_ev.1.d
    picture = GFX_report_event_ITA_democratic_parlament

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_japanchuria_ev.1.a # Send Proposal
        ai_chance = { factor = 99 }
        set_country_flag = JAP_r56rp_proposed_japanchuria
        KOR = { 
            country_event = { id = JAP_r56rp_japanchuria_ev.2 days = 2 }
        }
        MAN = { 
            country_event = { id = JAP_r56rp_japanchuria_ev.3 days = 2 }
        }
    }
}

# KOREA'S RESPONSE
country_event = {
    id = JAP_r56rp_japanchuria_ev.2
    title = JAP_r56rp_japanchuria_ev.2.t
    desc = JAP_r56rp_japanchuria_ev.2.d
    picture = GFX_report_event_KOR_japanchuria

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_japanchuria_ev.2.a # Accept
        ai_chance = { factor = 50 }
        set_country_flag = JAP_r56rp_KOR_accept
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.2.b # Demand Autonomy
        ai_chance = { factor = 30 }
        set_country_flag = JAP_r56rp_KOR_autonomy
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.2.c # Decline
        ai_chance = { factor = 20 }
        set_country_flag = JAP_r56rp_KOR_reject
    }
}

# MANCHURIA'S RESPONSE
country_event = {
    id = JAP_r56rp_japanchuria_ev.3
    title = JAP_r56rp_japanchuria_ev.3.t
    desc = JAP_r56rp_japanchuria_ev.3.d
    picture = GFX_report_event_MAN_japanchuria

    is_triggered_only = yes

    option = {
        name = JAP_r56rp_japanchuria_ev.3.a # Accept
        ai_chance = { factor = 50 }
        set_country_flag = JAP_r56rp_MAN_accept
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.3.b # Demand Autonomy
        ai_chance = { factor = 30 }
        set_country_flag = JAP_r56rp_MAN_autonomy
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.3.c # Decline
        ai_chance = { factor = 20 }
        set_country_flag = JAP_r56rp_MAN_reject
    }
}

# JAPAN RECEIVES FINAL DECISION
country_event = {
    id = JAP_r56rp_japanchuria_ev.4
    title = JAP_r56rp_japanchuria_ev.4.t
    desc = JAP_r56rp_japanchuria_ev.4.d
    picture = GFX_report_event_ITA_democratic_parlament

    is_triggered_only = no
    trigger = {
        has_country_flag = JAP_r56rp_proposed_japanchuria
        OR = {
            has_country_flag = JAP_r56rp_KOR_accept
            has_country_flag = JAP_r56rp_KOR_autonomy
            has_country_flag = JAP_r56rp_KOR_reject
        }
        OR = {
            has_country_flag = JAP_r56rp_MAN_accept
            has_country_flag = JAP_r56rp_MAN_autonomy
            has_country_flag = JAP_r56rp_MAN_reject
        }
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.4.a # Full Unification
        ai_chance = { factor = 100 }
        trigger = {
            has_country_flag = JAP_r56rp_KOR_accept
            has_country_flag = JAP_r56rp_MAN_accept
        }
        annex_country = KOR
        annex_country = MAN
        set_cosmetic_tag = JAP_r56rp_JAPMAN
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.4.b # Both Demand Autonomy
        ai_chance = { factor = 100 }
        trigger = {
            has_country_flag = JAP_r56rp_KOR_autonomy
            has_country_flag = JAP_r56rp_MAN_autonomy
        }
        add_dynamic_modifier = { modifier = JAP_r56rp_autonomous_puppets days = -1 }
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.4.c # Mixed Responses
        ai_chance = { factor = 100 }
        trigger = {
            OR = {
                AND = { has_country_flag = JAP_r56rp_KOR_accept has_country_flag = JAP_r56rp_MAN_autonomy }
                AND = { has_country_flag = JAP_r56rp_MAN_accept has_country_flag = JAP_r56rp_KOR_autonomy }
            }
        }
        if = {
            limit = { has_country_flag = JAP_r56rp_KOR_accept }
            annex_country = KOR
        }
        if = {
            limit = { has_country_flag = JAP_r56rp_MAN_accept }
            annex_country = MAN
        }
        add_dynamic_modifier = { modifier = JAP_r56rp_autonomous_puppets days = -1 }
    }

    option = {
        name = JAP_r56rp_japanchuria_ev.4.d # Both Reject
        ai_chance = { factor = 100 }
        trigger = {
            has_country_flag = JAP_r56rp_KOR_reject
            has_country_flag = JAP_r56rp_MAN_reject
        }
        release = KOR
        release = MAN
    }
}

