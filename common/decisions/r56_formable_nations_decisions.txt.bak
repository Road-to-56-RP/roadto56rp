#### RT56 OVERWRITE TO DISABLE FORMABLES/ Ensure their Hides are correct
form_prussia_category = {
    form_prussia = {
        icon = formable_nations_prussia
        cost = 0
        fire_only_once = yes

        allowed = { original_tag = DNZ }

        available = {
            controls_state = 64
            controls_state = 68
            controls_state = 63
            controls_state = 66
            controls_state = 67
            controls_state = 807
            controls_state = 86
            controls_state = 762
            controls_state = 85
            controls_state = 62
            controls_state = 5
            controls_state = 763
        }

        ai_will_do = {
            factor = 150
        }

        complete_effect = {
            add_state_core = 64
            add_state_core = 68
            add_state_core = 63
            add_state_core = 66
            add_state_core = 67
            add_state_core = 807
            add_state_core = 86
            add_state_core = 762
            add_state_core = 763
            add_state_core = 188
            add_state_core = 85
            add_state_core = 62
            add_ideas = generic_recent_political_unification
            add_ideas = generic_recent_army_unification
            add_ideas = generic_recent_economic_unification
        }
    }
}

recreate_belgium_category = {

    recreate_belgium = {
        allowed = {
            OR = {
                original_tag = WLL
                original_tag = FLA
            }
        }
        fire_only_once = yes
        available = {
            if = {
                limit = { original_tag = FLA }
                NOT = { has_government = fascism }
            }
            is_subject = no
            6 = { is_controlled_by = ROOT }
            34 = { is_controlled_by = ROOT }
        }
        icon = generic_form_nation
        complete_effect = {
            set_country_flag = reunified_belgium_flag

            if = {
                limit  = {
                    ROOT = { has_government = democratic }
                }
                if = {
                    limit = { BEL = { democratic < 0.5 } }
                    BEL = {
                        add_popularity = { ideology = democratic popularity = 0.33 }
                        set_politics = {
                            ruling_party = democratic elections_allowed = yes
                        }
                    }
                }
                else = {
                    BEL = {
                        unlock_national_focus = BEL_form_coalition_government
                    }
                }
            }

            if = {
                limit  = {
                    ROOT = { has_government = neutrality }
                }
                if = {
                    limit = {
                        BEL = { neutrality < 0.5 }
                    }
                    BEL = {
                        add_popularity = { ideology = neutrality popularity = 0.33 }
                        set_politics = {
                            ruling_party = neutrality elections_allowed = yes
                        }
                    }
                }
                else = {
                    BEL = {
                        unlock_national_focus = BEL_king_reaction
                    }
                }
            }

            if = {
                limit  = {
                    ROOT = { has_government = communism }
                }
                if = {
                    limit  = {
                        BEL = { communism < 0.5 }
                    }
                    BEL = {
                        add_popularity = { ideology = communism popularity = 0.33 }
                        set_politics = {
                            ruling_party = communism elections_allowed = no
                        }
                    }
                }
                if = { #Check. If exclusive, then use else_if.
                    limit  = {
                        BEL = { has_idea = BEL_leopold3 }
                    }
                    BEL = {
                        swap_ideas = {
                            remove_idea = BEL_leopold3
                            add_idea = BEL_leopold3_exile
                        }
                    }
                }
                else = {
                    BEL = {
                        unlock_national_focus = BEL_go_left
                    }
                }
            }

            else = { 
                if = {
                    limit  = {
                        BEL = { fascism < 0.5 }
                    }
                    BEL = {
                        add_popularity = { ideology = fascism popularity = 0.33 }
                        set_politics = {
                             ruling_party = fascism elections_allowed = no
                        }
                    }
                }
                if = { #Check. If exclusive, then use else_if.
                    limit  = {
                        BEL = { has_idea = BEL_leopold3 }
                    }
                    BEL = {
                        swap_ideas = {
                            remove_idea = BEL_leopold3
                            add_idea = BEL_leopold3_exile
                        }
                    }
                }
                else = {
                    BEL = {
                        unlock_national_focus = BEL_go_right
                        unlock_national_focus = BEL_choose_Rex
                    }
                }
            }

            BEL = {
                set_capital = { state = 6 }
                add_ideas = generic_recent_political_unification
                add_ideas = generic_recent_army_unification
                add_ideas = generic_recent_economic_unification
                set_country_flag = BEL_1936_election
                annex_country = {
                    target = ROOT
                    transfer_troops = yes
                }
                change_tag_from = ROOT
            }
            FLA = {
                every_unit_leader = {
                    set_nationality = BEL
                }
                # exclude regional nationalists
            }
            WLL = {
                every_unit_leader = {
                    set_nationality = BEL
                }
            }
        }

        ai_will_do = {
            factor = 200
            modifier = {
                factor = 0
                is_historical_focus_on = yes
            }
        }
    }
}

ENG_restore_the_UK = {
    unite_britain = {
        days_re_enable = 0
        fire_only_once = yes

        visible = { original_tag = ENG }
        available = { #Scotland & Wales
            is_subject = no
            any_state = {
                OR = {
                    is_core_of = SCO
                    is_core_of = WLS
                    state = 119
                }

                OR = {
                    is_controlled_by = ROOT
                    OWNER = {
                        is_puppet_of = ROOT
                    }
                }
            }
        }
        icon = eng_install_government

        complete_effect = {
            drop_cosmetic_tag = yes
            every_state = {
                limit = {
                    OR = {
                        is_core_of = SCO
                        is_core_of = WLS
                        state = 119
                    }
                }
                add_core_of = ROOT
            }
            set_capital = { state = 126 }
            add_ideas = generic_recent_political_unification
            add_ideas = generic_recent_army_unification
            add_ideas = generic_recent_economic_unification
            hidden_effect = {
                news_event = { id = r56.news_event.38 hours = 6 }
            }
        }
        ai_will_do = {
            factor = 50
        }
    }
}

form_hispanoamerica_category = {
    form_hispanoamerica = {
        icon = formable_nations_hispanoamerica

        allowed = {
            OR = {
                original_tag = ARG
                original_tag = ECU
                original_tag = PAR
                original_tag = CHL
                original_tag = COL
                original_tag = PAN
                original_tag = BOL
                original_tag = URG
                original_tag = VEN
            }
        }
        fire_only_once = yes
        available = {
        
            any_state = {
                AND = {
                    is_core_of = ARG
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = ECU
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = CHL
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = COL
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = PAN
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = PRU
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = BOL
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = URG
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = VEN
                    is_controlled_by = ROOT
                }
            }
            any_state = {
                AND = {
                    is_core_of = PAR
                    is_controlled_by = ROOT
                }
            }
        }

        complete_effect = {
            set_cosmetic_tag = HIS_UNIFIED
            every_state = {
                limit = {
                    OR = {
                        is_core_of = ARG is_core_of = ECU is_core_of = PAR is_core_of = CHL is_core_of = COL is_core_of = PAN is_core_of = PRU is_core_of = BOL is_core_of = URG is_core_of = VEN is_core_of = ELS is_core_of = COS is_core_of = GUA is_core_of = HON is_core_of = NIC is_core_of = MEX is_core_of = CUB is_core_of = DOM
                        state = 311 #Belize
                        state = 686 #Puerto Rico
                        state = 695 #Curação
                    }
                }
                add_core_of = PREV
            }

            every_state = {
                limit = {
                    OR = {
                        region = 53 is_core_of = BAH #Caribbean + Bahamas
                        state = 366 state = 375 state = 376 state = 377 state = 378 state = 379 state = 380 state = 382 #Mexican old clay
                        state = 687 state = 299 state = 720 state = 502 state = 503 #Historical claims
                    }
                    NOT = { is_core_of = ROOT }
                }
                add_claim_by = ROOT
            }

            hidden_effect = {
                news_event = { id = r56.news_event.18 hours = 6 }
                set_global_flag = form_hispanomerica_flag
            }
            add_ideas = generic_recent_political_unification
            add_ideas = generic_recent_army_unification
            add_ideas = generic_recent_economic_unification
        }

        ai_will_do = {
            factor = 200
            modifier = {
                factor = 0
                is_historical_focus_on = yes
            }
        }
    }

    core_mexican_america = {
        fire_only_once = yes
        available = {
			378 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
			379 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
			377 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
			376 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
            382 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
			380 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
			375 = {
				is_fully_controlled_by = ROOT
				compliance > 50
			}
        }
        cost = 100
        days_remove = 120
        visible = {
            has_cosmetic_tag = HIS_UNIFIED
        }
		highlight_states = {
			highlight_state_targets = {
				state = 378
                state = 379
                state = 377
                state = 376
                state = 382
                state = 380
                state = 375
			}
		}
        complete_effect = {
            every_state = {
                limit = {
                    OR = {
                        state = 366 state = 375 state = 376 state = 377 state = 378 state = 379 state = 380 state = 382 #Mexican old clay
                    }
                }
                add_resistance = 15
            }
        }
		remove_effect = {
            366 = { add_core_of = ROOT }
            375 = { add_core_of = ROOT }
            376 = { add_core_of = ROOT }
            377 = { add_core_of = ROOT }
            378 = { add_core_of = ROOT }
            379 = { add_core_of = ROOT }
            380 = { add_core_of = ROOT }
            382 = { add_core_of = ROOT }
            hidden_effect = {
                remove_state_claim = 366
                remove_state_claim = 375
                remove_state_claim = 376
                remove_state_claim = 377
                remove_state_claim = 378
                remove_state_claim = 379
                remove_state_claim = 380
                remove_state_claim = 382
            }
		}
        ai_will_do = {
            factor = 200
        }
    }
}

#### FINALIZE UNIFICATION ####
formable_nations_mod_category = {
    political_unification = {
        visible = {
            has_idea = generic_recent_political_unification
        }
        #fire_only_once = yes
        available = { has_idea = generic_recent_political_unification }

        icon = generic_form_nation
        cost = 75
        days_remove = 90

        remove_effect = {
            remove_ideas = generic_recent_political_unification
        }

        ai_will_do = {
            factor = 50
        }
    }

    army_unification = {
        visible = {
            has_idea = generic_recent_army_unification
        }
    # fire_only_once = yes
        available = {
            has_idea = generic_recent_army_unification
        }

        icon = attache
        cost = 75
        days_remove = 90

        remove_effect = {
            remove_ideas = generic_recent_army_unification
        }

        ai_will_do = {
            factor = 50
        }
    }

    economic_unification = {
        visible = {
            has_idea = generic_recent_economic_unification
        }
        #fire_only_once = yes
        available = {
            has_idea = generic_recent_economic_unification
        }

        icon = generic_construction
        cost = 75
        days_remove = 90

        remove_effect = {
            remove_ideas = generic_recent_economic_unification
        }

        ai_will_do = {
            factor = 50
        }
    }
}